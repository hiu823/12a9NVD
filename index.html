<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>3D Sphere ADMIN VERSION</title>

<style>
body{
    margin:0;
    height:100vh;
    overflow:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    perspective:1200px;
    font-family:Arial;
    background:black;
    --x:50%;
    --y:50%;
}

/* Glow theo chuá»™t */
body::before{
    content:"";
    position:fixed;
    inset:0;
    background:
        radial-gradient(circle at var(--x) var(--y),
        rgba(0,255,255,0.25),
        transparent 40%);
    z-index:-1;
    pointer-events:none;
}

/* Nebula */
body::after{
    content:"";
    position:fixed;
    width:900px;
    height:900px;
    background:radial-gradient(circle,
        rgba(120,0,255,0.25),
        rgba(0,0,255,0.15),
        transparent 70%);
    filter:blur(160px);
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    z-index:-2;
}

/* Particle canvas */
#bg{
    position:fixed;
    inset:0;
    z-index:-3;
}

/* Sphere */
.sphere{
    position:relative;
    width:0;
    height:0;
    transform-style:preserve-3d;
}

.text{
    position:absolute;
    font-weight:bold;
    color:#00ffff;
    white-space:nowrap;
    text-shadow:
        0 0 5px #00ffff,
        0 0 15px #00ffff,
        0 0 30px #00ffff;
    transition:opacity 0.2s, font-size 0.2s;
}

/* Controls */
.controls{
    position:fixed;
    bottom:20px;
    left:20px;
    display:flex;
    gap:8px;
}

.controls input{
    padding:8px;
    font-size:16px;
}
.controls button{
    padding:8px 12px;
    font-size:16px;
    cursor:pointer;
}

/* Heart */
.heart-wrapper{
    position:absolute;
    transform-style:preserve-3d;
}
.heart3d{
    position:relative;
    width:140px;
    height:130px;
    transform-style:preserve-3d;
    animation: heartbeat 0.83s ease-in-out infinite,
               glow 2s ease-in-out infinite alternate;
}
.heart-face{
    position:absolute;
    width:70px;
    height:110px;
    background:rgba(255,0,0,0.25);
    border-radius:70px 70px 0 0;
    backdrop-filter: blur(4px);
    box-shadow:
        0 0 30px rgba(255,0,0,0.6),
        inset 0 0 20px rgba(255,255,255,0.3);
}
.left-front{
    left:70px;
    transform:rotate(-45deg) translateZ(12px);
    transform-origin:0 100%;
}
.right-front{
    left:0;
    transform:rotate(45deg) translateZ(12px);
    transform-origin:100% 100%;
}
.left-back{
    left:70px;
    transform:rotate(-45deg) translateZ(-12px);
    transform-origin:0 100%;
    opacity:0.6;
}
.right-back{
    left:0;
    transform:rotate(45deg) translateZ(-12px);
    transform-origin:100% 100%;
    opacity:0.6;
}
.heart-text{
    position:absolute;
    inset:0;
    display:flex;
    justify-content:center;
    align-items:center;
    color:white;
    font-weight:bold;
    font-size:30px;
    text-shadow:0 0 15px white;
    transform:translateZ(25px);
}
@keyframes heartbeat{
    0%{scale:1;}
    15%{scale:1.08;}
    30%{scale:1;}
    45%{scale:1.05;}
    70%{scale:1;}
    100%{scale:1;}
}
@keyframes glow{
    from{filter:drop-shadow(0 0 10px red);}
    to{filter:drop-shadow(0 0 25px red);}
}
</style>
</head>

<body>

<canvas id="bg"></canvas>
<div class="sphere" id="sphere"></div>

<div class="controls">
    <input type="text" id="textInput" placeholder="Nháº­p chá»¯ má»›i...">
    <button onclick="addText()">ThÃªm</button>
    <button id="resetBtn" onclick="resetTexts()" style="display:none;">Reset</button>
    <button id="clearBtn" onclick="clearTexts()" style="display:none;">XoÃ¡ háº¿t</button>
</div>

<script>

/* ===== ADMIN CONFIG ===== */
const ADMIN_PASSWORD = "12a9pro";
let adminMode = false;

/* ADMIN HOTKEY */
document.addEventListener("keydown", function(e){
    if(e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "k"){
        if(!adminMode){
            const pass = prompt("Nháº­p máº­t kháº©u admin:");
            if(pass === ADMIN_PASSWORD){
                adminMode = true;
                document.getElementById("resetBtn").style.display="inline-block";
                document.getElementById("clearBtn").style.display="inline-block";
                alert("Admin mode ON ðŸ˜Ž");
            }else{
                alert("Sai máº­t kháº©u!");
            }
        }else{
            adminMode = false;
            document.getElementById("resetBtn").style.display="none";
            document.getElementById("clearBtn").style.display="none";
            alert("Admin mode OFF");
        }
    }
});

/* Glow chuá»™t */
document.addEventListener("mousemove",e=>{
    document.body.style.setProperty('--x', e.clientX+'px');
    document.body.style.setProperty('--y', e.clientY+'px');
});

/* PARTICLES */
const canvas=document.getElementById("bg");
const ctx=canvas.getContext("2d");
function resize(){
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

let particles=[];
for(let i=0;i<150;i++){
    particles.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        r:Math.random()*2,
        dx:(Math.random()-0.5)*0.3,
        dy:(Math.random()-0.5)*0.3
    });
}
function animateBg(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="white";
    particles.forEach(p=>{
        p.x+=p.dx;
        p.y+=p.dy;
        if(p.x<0||p.x>canvas.width) p.dx*=-1;
        if(p.y<0||p.y>canvas.height) p.dy*=-1;
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fill();
    });
    requestAnimationFrame(animateBg);
}
animateBg();

/* TEXT STORAGE */
let defaultTexts=["Xin chÃ o ðŸŒ","12A9","Ultra Galaxy","3D Sphere"];
let texts=JSON.parse(localStorage.getItem("sphereTexts")) || defaultTexts;

const sphere=document.getElementById("sphere");
const radius=200;
let textElements=[];
let angleX=0,angleY=0;
let autoRotateSpeed=0.15;
let isDragging=false,lastX,lastY;
let velocityX=0,velocityY=0;
let friction=0.95;

function saveTexts(){
    localStorage.setItem("sphereTexts", JSON.stringify(texts));
}

function renderSphere(){
    sphere.innerHTML="";
    const count=texts.length;

    texts.forEach((content,i)=>{
        const div=document.createElement("div");
        div.className="text";
        div.innerText=content;

        const phi=Math.acos(-1+(2*i)/count);
        const theta=Math.sqrt(count*Math.PI)*phi;

        div.dataset.x=radius*Math.cos(theta)*Math.sin(phi);
        div.dataset.y=radius*Math.sin(theta)*Math.sin(phi);
        div.dataset.z=radius*Math.cos(phi);

        sphere.appendChild(div);
    });

    const wrapper=document.createElement("div");
    wrapper.className="heart-wrapper";
    wrapper.innerHTML=`
        <div class="heart3d">
            <div class="heart-face left-front"></div>
            <div class="heart-face right-front"></div>
            <div class="heart-face left-back"></div>
            <div class="heart-face right-back"></div>
            <div class="heart-text">12A9</div>
        </div>`;
    sphere.appendChild(wrapper);

    textElements=[...document.querySelectorAll(".text")];
    saveTexts();
}
renderSphere();

function addText(){
    const input=document.getElementById("textInput");
    const value=input.value.trim();
    if(value!==""){
        texts.push(value);
        input.value="";
        renderSphere();
    }
}

function resetTexts(){
    texts=[...defaultTexts];
    renderSphere();
}

function clearTexts(){
    texts=[];
    renderSphere();
}

/* Drag */
document.addEventListener("mousedown",e=>{
    isDragging=true; lastX=e.clientX; lastY=e.clientY;
});
document.addEventListener("mousemove",e=>{
    if(!isDragging) return;
    let dx=e.clientX-lastX;
    let dy=e.clientY-lastY;
    velocityY=dx*0.2;
    velocityX=-dy*0.2;
    angleY+=velocityY;
    angleX+=velocityX;
    lastX=e.clientX; lastY=e.clientY;
});
document.addEventListener("mouseup",()=>isDragging=false);

function animate(){
    if(!isDragging){
        angleY+=autoRotateSpeed;
        angleY+=velocityY;
        angleX+=velocityX;
        velocityX*=friction;
        velocityY*=friction;
    }

    sphere.style.transform=`rotateX(${angleX}deg) rotateY(${angleY}deg)`;

    textElements.forEach(el=>{
        el.style.transform=`
            translate3d(${el.dataset.x}px,
                        ${el.dataset.y}px,
                        ${el.dataset.z}px)
            rotateY(${-angleY}deg)
            rotateX(${-angleX}deg)
        `;
        let depth=(el.dataset.z-(-radius))/(2*radius);
        el.style.opacity=depth;
        el.style.fontSize=(14+depth*12)+"px";
    });

    const heart=document.querySelector(".heart-wrapper");
    if(heart){
        heart.style.transform=`
            rotateY(${-angleY}deg)
            rotateX(${-angleX}deg)
        `;
    }

    requestAnimationFrame(animate);
}
animate();

</script>
</body>
</html>